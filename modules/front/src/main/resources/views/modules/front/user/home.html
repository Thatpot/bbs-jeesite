<%/* Copyright (c) 2013-Now http://jeesite.com All rights reserved. */
var secretKey = @Global.getConfig("shiro.loginSubmit.secretKey");
var userName = frontUser.userName;
var sex = frontUser.sex;
var sign = frontUser.sign;
var upAuth = frontUser.front.upAuth;
var upCity = frontUser.front.upCity;
var upVlevel = frontUser.front.upVlevel;
var upKiss = frontUser.front.upKiss;
var createDate = @DateUtils.formatDate(frontUser.front.createDate);
var avatarUrl = @frontUser.getAvatarUrl().replaceFirst('/ctxPath', ctxPath);
%>
<% layout('/layouts/f_default.html', {title: '用户主页',libs: ['']}){ %>
<% include('/include/upgrade.html'){} // 如果客户浏览器版本过低，则显示浏览器升级提示。 %>
<!--主要内容区-->
<div class="fly-home fly-panel">
    <img src="${avatarUrl}" alt="贤心">
    ${upAuth!=null?'<i class="iconfont icon-renzheng" title="认证信息：'+upAuth+'"></i>'}
    <h1>
        ${frontUser.userName}
        <% if(frontUser.sex=='1') { %>
            <i class="iconfont icon-nan"></i>
        <% } %>
        <% if(frontUser.sex=='2') { %>
            <i class="iconfont icon-nv"></i>
        <% } %>
        ${upVlevel!=null?'<i class="layui-badge fly-badge-vip">VIP'+upVlevel+'</i>'}
        <!--
        <span style="color:#c00;">（管理员）</span>
        <span style="color:#5FB878;">（社区之光）</span>
        <span>（该号已被封）</span>
        -->
    </h1>
    ${upAuth!=null?'<p style="padding: 10px 0; color: #5FB878;">认证信息：'+upAuth+'</p>'}
    <p class="fly-home-info">
        <i class="iconfont icon-kiss" title="飞吻"></i><span style="color: #FF7200;">${upKiss}飞吻</span>
        <i class="iconfont icon-shijian"></i><span>${createDate} 加入</span>
        ${upCity!=null?'<i class="iconfont icon-chengshi"></i><span>来自'+upCity+'</span>'}
    </p>
    ${sign!=null?'<p class="fly-home-sign">'+sign+'</p>'}
</div>

<div class="layui-container">
    <div class="layui-row layui-col-space15">
        <div class="layui-col-md6 fly-home-jie">
            <div class="fly-panel">
                <h3 class="fly-panel-title">${frontUser.userName} 最近的提问</h3>
                <ul class="jie-row">
                    <li>
                        <span class="fly-jing">精</span>
                        <a href="" class="jie-title"> 基于 layui 的极简社区页面模版</a>
                        <i>刚刚</i>
                        <em class="layui-hide-xs">1136阅/27答</em>
                    </li>
                    <li>
                        <a href="" class="jie-title"> 基于 layui 的极简社区页面模版</a>
                        <i>1天前</i>
                        <em class="layui-hide-xs">1136阅/27答</em>
                    </li>
                    <li>
                        <a href="" class="jie-title"> 基于 layui 的极简社区页面模版</a>
                        <i>2017-10-30</i>
                        <em class="layui-hide-xs">1136阅/27答</em>
                    </li>
                    <li>
                        <a href="" class="jie-title"> 基于 layui 的极简社区页面模版</a>
                        <i>1天前</i>
                        <em class="layui-hide-xs">1136阅/27答</em>
                    </li>
                    <li>
                        <a href="" class="jie-title"> 基于 layui 的极简社区页面模版</a>
                        <i>1天前</i>
                        <em class="layui-hide-xs">1136阅/27答</em>
                    </li>
                    <li>
                        <a href="" class="jie-title"> 基于 layui 的极简社区页面模版</a>
                        <i>1天前</i>
                        <em class="layui-hide-xs">1136阅/27答</em>
                    </li>
                    <li>
                        <a href="" class="jie-title"> 基于 layui 的极简社区页面模版</a>
                        <i>1天前</i>
                        <em class="layui-hide-xs">1136阅/27答</em>
                    </li>
                    <!-- <div class="fly-none" style="min-height: 50px; padding:30px 0; height:auto;"><i style="font-size:14px;">没有发表任何求解</i></div> -->
                </ul>
            </div>
        </div>

        <div class="layui-col-md6 fly-home-da">
            <div class="fly-panel">
                <h3 class="fly-panel-title">${frontUser.userName} 最近的回答</h3>
                <ul class="home-jieda">
                    <li>
                        <p>
                            <span>1分钟前</span>
                            在<a href="" target="_blank">tips能同时渲染多个吗?</a>中回答：
                        </p>
                        <div class="home-dacontent">
                            尝试给layer.photos加上这个属性试试：
                            <pre>
full: true
</pre>
                            文档没有提及
                        </div>
                    </li>
                    <li>
                        <p>
                            <span>5分钟前</span>
                            在<a href="" target="_blank">在Fly社区用的是什么系统啊?</a>中回答：
                        </p>
                        <div class="home-dacontent">
                            Fly社区采用的是NodeJS。分享出来的只是前端模版
                        </div>
                    </li>

                    <!-- <div class="fly-none" style="min-height: 50px; padding:30px 0; height:auto;"><span>没有回答任何问题</span></div> -->
                </ul>
            </div>
        </div>
    </div>
</div>
<!--引入页脚-->
<% include('/include/f_footer.html', {libs: ['']}){} %>
<script>

    layui.cache.page = '';
    layui.cache.user = {
        username: '游客'
        ,uid: -1
        ,avatar: '${ctxStatic}/fly/images/avatar/00.jpg'
        ,experience: 83
        ,sex: '男'
    };

    layui.config({
        version: "3.0.0"
        ,base: '${ctxStatic}/fly/mods/' //这里实际使用时，建议改成绝对路径
    }).extend({
        fly: 'index'
    }).use('fly', function(){
        var fly = layui.fly;
        var form = layui.form;
        form.on('submit(*)', function(data){
            var action = $(data.form).attr('action'), button = $(data.elem);
            var secretKey = '${secretKey}';
            data.field.username = DesUtils.encode(data.field.username,secretKey);
            data.field.password = DesUtils.encode(data.field.password, secretKey);
            data.field.validCode = DesUtils.encode(data.field.validCode, secretKey);
            fly.json(action, data.field, function(res){
                var end = function(res){
                    location.href = "../index";
                };
                if(res.result == "true"){
                    layer.msg('登录中', {
                        icon: 16,
                        shade: 0.01,
                        end:end(res),
                    });
                };
            },{type:"post",dataType:"json"});
            return false;
        });
    });

</script>
<% } %>